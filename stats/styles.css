/* Базовые стили для всего приложения */
body {
    margin: 0; /* Убирает внешние отступы страницы */
    font-family: Arial, sans-serif; /* Задаёт шрифт Arial или системный sans-serif */
    background-color: #f0f0f0; /* Светло-серый фон для светлой темы */
    transition: background-color 0.3s; /* Плавный переход цвета фона при смене темы */
}

body.dark-theme {
    background-color: #1a202c; /* Тёмный фон для тёмной темы */
    color: #e2e8f0; /* Светлый цвет текста для тёмной темы */
}

/* Главный контейнер */
#main-container {
    width: 60%; /* Ширина 60% на десктопе */
    height: 100vh; /* Полная высота экрана */
    margin: 0 auto; /* Центрирование по горизонтали */
    display: flex; /* Использует flexbox для расположения дочерних элементов */
    flex-direction: column; /* Вертикальное расположение дочерних элементов */
    background-color: #fff; /* Белый фон для светлой темы */
    position: relative; /* Для позиционирования button-container и z-index */
    z-index: 1000; /* Ниже бокового меню, чтобы sidebar перекрывал */
}

body.dark-theme #main-container {
    background-color: #2d3748; /* Тёмный фон контейнера для тёмной темы */
}

/* Верхняя полоса */
#top-bar {
    width: 100%; /* Полная ширина контейнера */
    padding: 0.5rem 0.75rem; /* Внутренние отступы: 8px сверху/снизу, 12px слева/справа */
    background-color: #e0e0e0; /* Светло-серый фон для светлой темы */
    display: flex; /* Flexbox для расположения элементов */
    align-items: center; /* Вертикальное центрирование элементов */
    justify-content: flex-start; /* Выравнивание элементов слева */
    box-sizing: border-box; /* Включает padding в расчёт ширины */
}

body.dark-theme #top-bar {
    background-color: #4a5568; /* Тёмный фон полосы для тёмной темы */
}

/* Кнопка меню */
#menu-button {
    margin-right: 1rem; /* Отступ справа 16px */
    padding: 0.5rem; /* Внутренние отступы 8px */
    min-width: 44px; /* Минимальная ширина кнопки */
    min-height: 44px; /* Минимальная высота кнопки */
    background-color: #e0e0e0; /* Фон как у top-bar в светлой теме */
    color: #000; /* Чёрный цвет иконки в светлой теме */
}

body.dark-theme #menu-button {
    background-color: #4a5568; /* Фон как у top-bar в тёмной теме */
    color: #fff; /* Белый цвет иконки в тёмной теме */
}

/* Заголовок приложения */
#app-title {
    font-size: 2rem; /* Размер шрифта 32px */
    font-weight: bold; /* Жирное начертание */
    flex-grow: 1; /* Занимает всё доступное пространство */
    text-align: center; /* Центрирование текста */
}

/* Панель с карточками */
#card-container {
    flex-grow: 1; /* Занимает всё доступное пространство по высоте */
    display: flex; /* Flexbox для расположения элементов */
    flex-direction: column; /* Вертикальное расположение */
    justify-content: flex-start; /* Выравнивание содержимого сверху */
    align-items: center; /* Центрирование по горизонтали */
    padding: 1rem; /* Внутренние отступы 16px */
    box-sizing: border-box; /* Включает padding в расчёт размеров */
    overflow: auto; /* Прокрутка при переполнении */
    margin-top: 3.5rem; /* Отступ сверху 56px для top-bar */
}

/* Стили для строки "Тренировка"/"Тестирование" */
#mode-title {
    font-size: 1.5rem; /* Размер шрифта 24px */
    font-weight: bold; /* Жирное начертание */
}

/* Таймер */
#timer {
    font-size: 1.25rem; /* Размер шрифта 20px */
    margin-bottom: 1rem; /* Отступ снизу 16px */
}

/* Таблица для цифры и текста */
.card-table {
    display: grid; /* Использует grid для табличного отображения */
    grid-template-columns: 1fr 1fr; /* Две колонки равной ширины */
    grid-template-rows: auto auto; /* Две строки */
    width: 100%; /* Полная ширина контейнера */
    margin-bottom: 0.5rem; /* Отступ снизу 8px */
    text-align: center; /* Центрирование текста */
}

.table-row {
    display: contents; /* Убирает контейнер строки для корректной работы grid */
}

.table-cell {
    display: flex; /* Flexbox для центрирования содержимого */
    justify-content: center; /* Горизонтальное центрирование */
    align-items: center; /* Вертикальное центрирование */
    padding: 0.5rem; /* Внутренние отступы 8px */
}

.table-cell span[data-i18n="digit_label"],
.table-cell span[data-i18n="letter_word_label"] {
    font-size: 1.25rem; /* Размер шрифта меток 20px, меньше чем #mode-title */
}

/* Цифра в таблице */
#card-digit {
    font-size: 4rem; /* Размер шрифта 64px, в 2 раза больше #app-title */
    font-weight: bold; /* Жирное начертание */
}

/* Буква или слово в таблице */
#card-text {
    font-size: 4rem; /* Размер шрифта 64px, в 2 раза больше #app-title */
}

/* Изображение карточки */
#card-image {
    max-width: 100%; /* Максимальная ширина изображения */
    height: auto; /* Автоматическая высота для сохранения пропорций */
    object-fit: contain; /* Сохранение пропорций изображения */
    max-height: 48vh; /* Максимальная высота 48% от высоты экрана */
    margin-bottom: 1rem; /* Отступ снизу 16px */
    margin-top: 0.5rem; /* Отступ сверху 8px */
}

/* Контейнер для вариантов ответа */
#options-container {
    display: flex; /* Flexbox для расположения вариантов */
    flex-direction: column; /* Вертикальное расположение */
    gap: 1rem; /* Отступ между элементами 16px */
    margin-bottom: 1rem; /* Отступ снизу 16px */
}

.options-row {
    display: flex; /* Flexbox для строки вариантов */
    gap: 0.5rem; /* Отступ между вариантами 8px */
    flex-wrap: wrap; /* Перенос на новую строку при нехватке места */
    justify-content: center; /* Центрирование вариантов */
}

.option {
    padding: 0.5rem 1rem; /* Отступы: 8px сверху/снизу, 16px слева/справа */
    border: 1px solid #ccc; /* Серая рамка */
    border-radius: 4px; /* Скругление углов 4px */
    cursor: pointer; /* Курсор указателя при наведении */
    background-color: #fff; /* Белый фон */
    transition: background-color 0.2s; /* Плавный переход фона */
}

.option:hover {
    background-color: #e0e0e0; /* Светло-серый фон при наведении */
}

.option.selected {
    background-color: #4caf50; /* Зелёный фон для выбранного варианта */
    color: #fff; /* Белый текст */
}

body.dark-theme .option {
    background-color: #2d3748; /* Тёмный фон в тёмной теме */
    border-color: #4a5568; /* Тёмная рамка в тёмной теме */
}

body.dark-theme .option:hover {
    background-color: #4a5568; /* Более светлый тёмный фон при наведении */
}

body.dark-theme .option.selected {
    background-color: #68d391; /* Светло-зелёный фон для выбранного */
    color: #1a202c; /* Тёмный текст */
}

/* Обратная связь */
#feedback {
    font-size: 1.25rem; /* Размер шрифта 20px */
    margin-bottom: 1rem; /* Отступ снизу 16px */
}

/* Кнопки управления */
#button-container {
    display: flex; /* Flexbox для расположения кнопок */
    gap: 1rem; /* Отступ между кнопками 16px */
    position: absolute; /* Абсолютное позиционирование */
    bottom: 40px; /* Расстояние от нижнего края 40px */
    width: 100%; /* Полная ширина */
    justify-content: center; /* Центрирование кнопок */
}

.button {
    padding: 0.75rem; /* Отступы 12px */
    min-width: 100px; /* Минимальная ширина 100px */
    min-height: 52px; /* Минимальная высота 52px */
    border: none; /* Без рамки */
    border-radius: 4px; /* Скругление углов 4px */
    background-color: #4caf50; /* Зелёный фон */
    color: #fff; /* Белый текст */
    cursor: pointer; /* Курсор указателя */
    font-size: 1.25rem; /* Размер шрифта 20px */
    transition: background-color 0.2s; /* Плавный переход фона */
}

.button:hover {
    background-color: #45a049; /* Тёмно-зелёный фон при наведении */
}

body.dark-theme .button {
    background-color: #68d391; /* Светло-зелёный фон в тёмной теме */
    color: #1a202c; /* Тёмный текст */
}

body.dark-theme .button:hover {
    background-color: #5ab885; /* Более тёмный зелёный при наведении */
}

/* Модальное окно */
.modal {
    display: none; /* Скрыто по умолчанию */
    position: fixed; /* Фиксированное положение */
    top: 0; /* Прижато к верхнему краю */
    left: 0; /* Прижато к левому краю */
    width: 100%; /* Полная ширина */
    height: 100%; /* Полная высота */
    background-color: rgba(0, 0, 0, 0.5); /* Полупрозрачный чёрный фон */
    z-index: 1002; /* Выше бокового меню */
    justify-content: center; /* Центрирование содержимого по горизонтали */
    align-items: center; /* Центрирование содержимого по вертикали */
}

.modal-content {
    background-color: #fff; /* Белый фон для светлой темы */
    border-radius: 0.5rem; /* Скругление углов 8px */
    padding: 1rem; /* Внутренние отступы 16px */
    width: 80%; /* Ширина 80% на десктопе */
    max-width: 500px; /* Максимальная ширина 500px */
    max-height: 90vh; /* Максимальная высота 90% экрана */
    overflow-y: auto; /* Прокрутка по вертикали */
    box-sizing: border-box; /* Включает padding в размеры */
}

body.dark-theme .modal-content {
    background-color: #2d3748; /* Тёмный фон в тёмной теме */
    color: #e2e8f0; /* Светлый текст в тёмной теме */
}

/* Боковое меню */
.sidebar {
    position: fixed; /* Фиксированное положение */
    top: 0; /* Прижато к верхнему краю */
    left: 20%; /* Отступ слева 20% для десктопа */
    width: 250px; /* Фиксированная ширина 250px */
    height: 100%; /* Полная высота */
    background-color: #fff; /* Белый фон для светлой темы */
    transform: translateX(-100%); /* Скрыто за левым краем */
    transition: transform 0.3s ease-in-out; /* Плавное выдвижение */
    z-index: 1001; /* Ниже модального окна, выше main-container */
}

body.dark-theme .sidebar {
    background-color: #2d3748; /* Тёмный фон в тёмной теме */
}

.sidebar.active {
    transform: translateX(0); /* Показывает меню при активации */
}

/* Заголовочная полоса бокового меню */
#sidebar-header {
    width: 100%; /* Полная ширина */
    padding: 0.75rem 1rem; /* Отступы: 12px сверху/снизу, 16px слева/справа */
    background-color: #e0e0e0; /* Светло-серый фон для светлой темы */
    display: flex; /* Flexbox для расположения элементов */
    align-items: center; /* Вертикальное центрирование */
    justify-content: space-between; /* Элементы по краям */
    box-sizing: border-box; /* Включает padding в размеры */
}

body.dark-theme #sidebar-header {
    background-color: #4a5568; /* Тёмный фон в тёмной теме */
}

/* Кнопка смены темы */
.theme-button {
    background: none; /* Без фона */
    border: none; /* Без рамки */
    cursor: pointer; /* Курсор указателя */
    padding: 0.5rem; /* Отступы 8px */
}

.theme-button img {
    width: 24px; /* Ширина иконки 24px */
    height: 24px; /* Высота иконки 24px */
}

body.dark-theme .theme-button img {
    content: url('../icons/moon.svg'); /* Иконка луны в тёмной теме */
    filter: brightness(0) invert(1); /* Делает иконку белой */
}

body:not(.dark-theme) .theme-button img {
    content: url('../icons/sun.svg'); /* Иконка солнца в светлой теме */
}

/* Иконки меню */
.menu-icon {
    width: 20px; /* Ширина иконки 20px */
    height: 20px; /* Высота иконки 20px */
    margin-right: 0.5rem; /* Отступ справа 8px */
    display: inline-block; /* Встроенный блок */
    vertical-align: middle; /* Вертикальное выравнивание */
}

body.dark-theme .menu-icon {
    filter: brightness(0) invert(1); /* Делает иконки белыми в тёмной теме */
}

/* Пункты меню */
#sidebar-content {
    padding: 1rem; /* Внутренние отступы 16px */
}

#sidebar-content .menu-item {
    display: flex; /* Flexbox для расположения */
    align-items: center; /* Вертикальное центрирование */
    padding: 0.75rem 1rem; /* Отступы: 12px сверху/снизу, 16px слева/справа */
    margin-bottom: 3rem; /* Отступ снизу 48px */
    cursor: pointer; /* Курсор указателя */
    border-bottom: 1px solid #e2e8f0; /* Серая граница снизу */
    box-sizing: border-box; /* Включает padding в размеры */
}

.menu-item {
    padding: 0.5rem; /* Отступы 8px */
    cursor: pointer; /* Курсор указателя */
    border-bottom: 1px solid #e2e8f0; /* Серая граница снизу */
}

.menu-item:hover {
    background-color: #e0e0e0; /* Светло-серый фон при наведении */
}

body.dark-theme .menu-item {
    border-bottom-color: #4a5568; /* Тёмная граница в тёмной теме */
}

body.dark-theme .menu-item:hover {
    background-color: #4a5568; /* Тёмный фон при наведении в тёмной теме */
}

/* Статистика */
#stats-summary p {
    margin: 0.5rem 0; /* Отступы сверху и снизу 8px */
}

#stats-chart, #history-chart {
    max-width: 100%; /* Полная ширина диаграмм */
}

table {
    width: 100%; /* Полная ширина таблицы */
    border-collapse: collapse; /* Убирает промежутки между ячейками */
}

th, td {
    border: 1px solid #e2e8f0; /* Серая рамка ячеек */
    padding: 0.5rem; /* Отступы внутри ячеек 8px */
    text-align: left; /* Выравнивание текста слева */
}

body.dark-theme th, body.dark-theme td {
    border-color: #4a5568; /* Тёмная рамка в тёмной теме */
}

/* Адаптивность для мобильных устройств */
@media (max-width: 640px) {
    #main-container {
        width: 100%; /* Полная ширина на мобильных */
    }
    #top-bar {
        padding: 0.5rem 0.75rem; /* Отступы: 8px сверху/снизу, 12px слева/справа */
    }
    #app-title {
        font-size: 1.5rem; /* Размер шрифта 24px */
    }
    #mode-title {
        font-size: 1.25rem; /* Размер шрифта 20px для "Тренировка"/"Тестирование" */
    }
    .modal-content {
        width: 100%; /* Полная ширина на мобильных */
        height: 100%; /* Полная высота на мобильных */
        max-width: none; /* Убирает ограничение ширины */
        max-height: none; /* Убирает ограничение высоты */
        border-radius: 0; /* Убирает скругление углов */
        padding: 0.5rem; /* Отступы 8px */
    }
    .sidebar {
        left: 0; /* Прижато к левому краю */
        width: 80%; /* Ширина 80% на мобильных */
        z-index: 1001; /* Ниже модального окна */
    }
    .table-cell span[data-i18n="digit_label"],
    .table-cell span[data-i18n="letter_word_label"] {
        font-size: 1rem; /* Размер шрифта меток 16px */
    }
    #card-digit {
        font-size: 3rem; /* Размер шрифта 48px */
    }
    #card-text {
        font-size: 3rem; /* Размер шрифта 48px */
    }
    #card-image {
        max-height: 36vh; /* Максимальная высота 36% экрана */
        margin-top: 0.5rem; /* Отступ сверху 8px */
    }
    .button {
        padding: 0.5rem; /* Отступы 8px */
        min-width: 100px; /* Минимальная ширина 100px */
        min-height: 52px; /* Минимальная высота 52px */
        font-size: 1rem; /* Размер шрифта 16px */
    }
}